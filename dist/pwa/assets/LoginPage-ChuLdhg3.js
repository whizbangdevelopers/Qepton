import{d as B,P as j,Q as P,u as M,r,a0 as b,S as y,X as i,l as e,ah as G,ad as c,U as a,Y as w,a1 as v,V as k,ae as x,ai as A,a2 as d,_ as L,$ as l,Z as W}from"./index-CJoUzN77.js";import{Q as N}from"./QBanner-_R3IhPse.js";import{Q as Y}from"./QPage-BMM3G3fh.js";import{u as h}from"./gists-RON_Ub2y.js";import{a as f}from"./useMeta-BdyRgvNg.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./settings-sync-D_TFiVOa.js";const Z="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYwIiBoZWlnaHQ9IjgwIiB2aWV3Qm94PSIwIDAgMjYwIDgwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDwhLS0gUSBJY29uIGludGVncmF0ZWQgLSBkYXJrIHZhcmlhbnQgLS0+CiAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwgOCkiPgogICAgPCEtLSBUcmFpbCBkb3RzIC0tPgogICAgPGNpcmNsZSBjeD0iNiIgY3k9IjMwIiByPSIyIiBmaWxsPSIjMWExYTJlIiBvcGFjaXR5PSIwLjE1Ii8+CiAgICA8Y2lyY2xlIGN4PSIxMyIgY3k9IjMwIiByPSIyLjUiIGZpbGw9IiMxYTFhMmUiIG9wYWNpdHk9IjAuMiIvPgogICAgPGNpcmNsZSBjeD0iMjEiIGN5PSIzMCIgcj0iMyIgZmlsbD0iIzFhMWEyZSIgb3BhY2l0eT0iMC4zIi8+CiAgICAKICAgIDwhLS0gU3BlZWQgbGluZXMgLS0+CiAgICA8bGluZSB4MT0iNCIgeTE9IjIwIiB4Mj0iMTgiIHkyPSIyMCIgc3Ryb2tlPSIjMWExYTJlIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBvcGFjaXR5PSIwLjE1Ii8+CiAgICA8bGluZSB4MT0iMSIgeTE9IjMwIiB4Mj0iMTIiIHkyPSIzMCIgc3Ryb2tlPSIjMWExYTJlIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBvcGFjaXR5PSIwLjEyIi8+CiAgICA8bGluZSB4MT0iNiIgeTE9IjQwIiB4Mj0iMTYiIHkyPSI0MCIgc3Ryb2tlPSIjMWExYTJlIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBvcGFjaXR5PSIwLjEiLz4KICAgIAogICAgPCEtLSBRIHJpbmcgLS0+CiAgICA8Y2lyY2xlIGN4PSI0MiIgY3k9IjI4IiByPSIxOCIgc3Ryb2tlPSIjMWE4YTgyIiBzdHJva2Utd2lkdGg9IjUiIGZpbGw9Im5vbmUiLz4KICAgIDwhLS0gQ29yZSAtLT4KICAgIDxjaXJjbGUgY3g9IjQyIiBjeT0iMjgiIHI9IjciIGZpbGw9IiMxYThhODIiLz4KICAgIDwhLS0gVGFpbCAtIGFycm93IHN0eWxlIC0tPgogICAgPHBhdGggZD0iTTU2IDQyIEw2NyA1MyBMNjEgNDcgTDY3IDUzIEw1OSA1MSIgc3Ryb2tlPSIjMWE4YTgyIiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgogIDwvZz4KICAKICA8IS0tICJlcHRvbiIgdGV4dCAtIGNsb3NlciB0byBRLCBwdXNoaW5nIGl0IC0tPgogIDx0ZXh0IHg9IjY4IiB5PSI1MiIgZm9udC1mYW1pbHk9Ik91dGZpdCwgLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAnU2Vnb2UgVUknLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjQyIiBmb250LXdlaWdodD0iNTAwIiBmaWxsPSIjMWExYTJlIiBsZXR0ZXItc3BhY2luZz0iMSI+ZXB0b248L3RleHQ+Cjwvc3ZnPgo=",H=["src"],Q={class:"text-center q-mt-md"},E={href:"https://github.com/settings/tokens/new?scopes=gist&description=Qepton",target:"_blank",class:"text-caption"},J=B({__name:"LoginPage",setup(U){const C=j(),u=P(),m=M(),p=h();f("Login","Login to access your GitHub Gists");const I=r(""),n=r(!1),s=r("");async function S(){if(!I.value.trim()){s.value="Please enter a token";return}n.value=!0,s.value="";try{await m.loginWithToken(I.value.trim()),u.notify({type:"positive",message:`Welcome, ${m.username}!`,icon:"check_circle"}),Promise.all([p.syncGists(),p.syncStarredGists()]).catch(o=>{console.error("Background sync failed:",o)}),C.push("/")}catch(o){s.value=o instanceof Error?o.message:"Invalid GitHub token",u.notify({type:"negative",message:"Login failed. Please check your token.",icon:"error"})}finally{n.value=!1}}return(o,t)=>(y(),b(Y,{class:"flex flex-center login-page"},{default:i(()=>[e(G,{class:"login-card"},{default:i(()=>[e(c,{class:"text-center logo-section"},{default:i(()=>[a("img",{src:w(Z),alt:"Qepton",class:"login-logo"},null,8,H),t[1]||(t[1]=a("div",{class:"text-subtitle1 text-grey-7 q-mt-sm"},"Prompt and Code Snippet Manager",-1))]),_:1}),e(v),e(c,null,{default:i(()=>[e(x,{modelValue:I.value,"onUpdate:modelValue":t[0]||(t[0]=g=>I.value=g),label:"GitHub Personal Access Token",type:"password",outlined:"",rules:[g=>!!g||"Token is required"],hint:"Paste your GitHub token with 'gist' scope",onKeyup:A(S,["enter"]),"data-test":"token-input"},{prepend:i(()=>[e(d,{name:"mdi-key"})]),_:1},8,["modelValue","rules"]),e(L,{color:"primary",label:"Login",onClick:S,loading:n.value,disable:!I.value,class:"full-width q-mt-md","data-test":"login-button"},null,8,["loading","disable"]),a("div",Q,[a("a",E,[e(d,{name:"mdi-open-in-new",size:"xs"}),t[2]||(t[2]=l(" Generate a new token ",-1))])]),s.value?(y(),b(N,{key:0,class:"bg-negative text-white q-mt-md",rounded:""},{avatar:i(()=>[e(d,{name:"error"})]),default:i(()=>[l(" "+W(s.value),1)]),_:1})):k("",!0)]),_:1}),e(c,{class:"text-center text-caption text-grey-7"},{default:i(()=>[...t[3]||(t[3]=[a("p",null,"Need help?",-1),a("p",null,[l("Token must have "),a("strong",null,"gist"),l(" scope to read and write gists")],-1)])]),_:1})]),_:1})]),_:1}))}}),K=T(J,[["__scopeId","data-v-0e138712"]]);export{K as default};
