# Transferring Workspace to Another Machine

This guide covers how to move the Qepton-Dev workspace to another machine (e.g., Mac M1) including git-ignored files.

## Transfer Options

### Option 1: rsync (Recommended)

```bash
# From your Linux machine
rsync -avz --progress /home/mark/Projects/Qepton-Dev/ user@mac-ip:~/Projects/Qepton-Dev/
```

This copies everything including git-ignored files.

**Skip node_modules** (recommended - reinstall on target machine):
```bash
rsync -avz --progress --exclude 'node_modules' /home/mark/Projects/Qepton-Dev/ user@mac-ip:~/Projects/Qepton-Dev/
```

### Option 2: tar Archive

```bash
# On source machine - create archive
cd /home/mark/Projects
tar -czvf qepton-dev.tar.gz Qepton-Dev/

# Transfer to target (via scp, USB, cloud storage, etc.)
scp qepton-dev.tar.gz user@mac-ip:~/Projects/

# On target machine - extract
cd ~/Projects
tar -xzvf qepton-dev.tar.gz
```

**Exclude node_modules** to reduce size:
```bash
tar -czvf qepton-dev.tar.gz --exclude='node_modules' Qepton-Dev/
```

### Option 3: Git Clone + Manual Copy

For a cleaner approach with selective file transfer:

```bash
# On target machine
git clone <repo-url> Qepton-Dev
cd Qepton-Dev

# Then manually copy over git-ignored files you need from source:
# - .env files
# - docs/ folder
# - docs/android/keystore.properties (if created)
# - Any local config
```

## What to Transfer

| File/Directory        | Transfer? | Reason                                   |
| --------------------- | --------- | ---------------------------------------- |
| `node_modules/`       | No        | Reinstall with `npm install`             |
| `.env` files          | Yes       | Contains your secrets/tokens             |
| `docs/` folder        | Yes       | Private documentation                    |
| `dist/`               | No        | Rebuild with `npm run build`             |
| `*.keystore`          | Yes       | If you created Android signing keys      |
| `.claude/`            | Optional  | Local AI tool config                     |
| `src-capacitor/android/` | No     | Regenerated by `npx cap add android`     |
| `src-capacitor/ios/`  | No        | Regenerated by `npx cap add ios`         |
| `.quasar/`            | No        | Build cache, regenerated                 |

## After Transfer

### On Mac M1

```bash
cd ~/Projects/Qepton-Dev

# Remove old node_modules if transferred
rm -rf node_modules

# Install dependencies (native binaries differ per platform)
npm install

# For iOS development
./docs/mac-ios/setup.sh

# For Android development (if Android Studio installed)
./docs/android/setup.sh
```

### On Linux

```bash
cd ~/Projects/Qepton-Dev

rm -rf node_modules
npm install

# For Android development
./docs/android/setup.sh
```

## Platform-Specific Notes

### Mac M1 (Apple Silicon)

- Native npm packages will be compiled for ARM64
- iOS Simulator runs natively (fast)
- Android emulator requires ARM system images
- Some older packages may need Rosetta: `arch -x86_64 npm install`

### Linux

- iOS development not available
- Android emulator uses x86_64 with KVM acceleration
- Ensure KVM is enabled for emulator performance

## Syncing Between Machines

If you work on multiple machines, consider:

1. **Git for tracked files** - Push/pull regularly
2. **Cloud sync for secrets** - Use a password manager or encrypted cloud storage for `.env` files and keystores
3. **Regenerate platform dirs** - Don't sync `src-capacitor/android/` or `src-capacitor/ios/` between machines

## Quick Transfer Checklist

- [ ] Commit and push any tracked changes to git
- [ ] Note which git-ignored files you need (`.env`, `docs/`, keystores)
- [ ] Transfer using rsync, tar, or manual copy
- [ ] On target: `rm -rf node_modules && npm install`
- [ ] On target: Run platform setup script (`./docs/mac-ios/setup.sh` or `./docs/android/setup.sh`)
- [ ] Verify the app builds and runs
