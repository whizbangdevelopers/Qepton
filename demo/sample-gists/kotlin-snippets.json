{
  "description": "Kotlin Coroutines and Extensions #kotlin #android",
  "public": true,
  "files": {
    "CoroutineUtils.kt": {
      "content": "package com.example.utils\n\nimport kotlinx.coroutines.*\nimport kotlinx.coroutines.flow.*\nimport kotlin.time.Duration\nimport kotlin.time.Duration.Companion.seconds\n\n/**\n * Retry a suspending operation with exponential backoff.\n */\nsuspend fun <T> retryWithBackoff(\n    times: Int = 3,\n    initialDelay: Duration = 1.seconds,\n    maxDelay: Duration = 10.seconds,\n    factor: Double = 2.0,\n    block: suspend () -> T\n): T {\n    var currentDelay = initialDelay\n    repeat(times - 1) { attempt ->\n        try {\n            return block()\n        } catch (e: Exception) {\n            println(\"Attempt ${attempt + 1} failed: ${e.message}\")\n        }\n        delay(currentDelay)\n        currentDelay = (currentDelay * factor).coerceAtMost(maxDelay)\n    }\n    return block() // Last attempt\n}\n\n/**\n * Debounce a Flow to emit only after a quiet period.\n */\nfun <T> Flow<T>.debounce(timeout: Duration): Flow<T> = flow {\n    var lastEmission: T? = null\n    var job: Job? = null\n    \n    collect { value ->\n        job?.cancel()\n        lastEmission = value\n        job = coroutineScope {\n            launch {\n                delay(timeout)\n                emit(lastEmission as T)\n            }\n        }\n    }\n}\n\n// Usage\nsuspend fun main() {\n    val result = retryWithBackoff(times = 3) {\n        // API call that might fail\n        fetchData()\n    }\n}"
    },
    "Extensions.kt": {
      "content": "package com.example.extensions\n\nimport java.text.NumberFormat\nimport java.util.*\n\n/**\n * Useful Kotlin extension functions.\n */\n\n// String extensions\nfun String.toTitleCase(): String =\n    split(\" \").joinToString(\" \") { word ->\n        word.lowercase().replaceFirstChar { it.uppercase() }\n    }\n\nfun String?.orEmpty(): String = this ?: \"\"\n\nfun String.truncate(maxLength: Int, suffix: String = \"...\"): String =\n    if (length <= maxLength) this\n    else take(maxLength - suffix.length) + suffix\n\n// Collection extensions\ninline fun <T> List<T>.indexOfFirstOrNull(predicate: (T) -> Boolean): Int? =\n    indexOfFirst(predicate).takeIf { it >= 0 }\n\nfun <T> List<T>.second(): T? = getOrNull(1)\n\n// Number extensions\nfun Number.toCurrency(locale: Locale = Locale.getDefault()): String =\n    NumberFormat.getCurrencyInstance(locale).format(this)\n\nfun Int.isEven(): Boolean = this % 2 == 0\nfun Int.isOdd(): Boolean = !isEven()\n\n// Scope function alternatives\ninline fun <T> T.applyIf(condition: Boolean, block: T.() -> Unit): T {\n    if (condition) block()\n    return this\n}\n\n// Usage examples\nfun main() {\n    println(\"hello world\".toTitleCase()) // \"Hello World\"\n    println(1234.56.toCurrency()) // \"$1,234.56\"\n    println(\"Long text here\".truncate(10)) // \"Long te...\"\n}"
    }
  }
}
