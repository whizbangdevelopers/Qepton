{
  "description": "Lua Scripts and Patterns #lua #gamedev #scripting",
  "public": true,
  "files": {
    "class_system.lua": {
      "content": "-- Simple OOP class system for Lua\n\nlocal Class = {}\nClass.__index = Class\n\nfunction Class:new()\n  local instance = setmetatable({}, self)\n  if instance.init then\n    instance:init()\n  end\n  return instance\nend\n\nfunction Class:extend()\n  local subclass = setmetatable({}, self)\n  subclass.__index = subclass\n  subclass.super = self\n  return subclass\nend\n\n-- Example usage\nlocal Entity = Class:extend()\n\nfunction Entity:init()\n  self.x = 0\n  self.y = 0\n  self.health = 100\nend\n\nfunction Entity:move(dx, dy)\n  self.x = self.x + dx\n  self.y = self.y + dy\nend\n\nfunction Entity:takeDamage(amount)\n  self.health = math.max(0, self.health - amount)\n  return self.health > 0\nend\n\n-- Inheritance\nlocal Player = Entity:extend()\n\nfunction Player:init()\n  Player.super.init(self)\n  self.name = \"Player\"\n  self.score = 0\nend\n\nfunction Player:addScore(points)\n  self.score = self.score + points\nend\n\n-- Usage\nlocal player = Player:new()\nplayer:move(10, 5)\nplayer:addScore(100)\nprint(string.format(\"Player at (%d, %d) with score %d\", \n  player.x, player.y, player.score))"
    },
    "coroutines.lua": {
      "content": "-- Lua coroutine patterns for async-like behavior\n\nlocal Scheduler = {}\nScheduler.tasks = {}\n\nfunction Scheduler.spawn(fn)\n  local co = coroutine.create(fn)\n  table.insert(Scheduler.tasks, co)\nend\n\nfunction Scheduler.run()\n  while #Scheduler.tasks > 0 do\n    local newTasks = {}\n    for _, task in ipairs(Scheduler.tasks) do\n      if coroutine.status(task) ~= \"dead\" then\n        local ok, err = coroutine.resume(task)\n        if not ok then\n          print(\"Task error: \" .. tostring(err))\n        elseif coroutine.status(task) ~= \"dead\" then\n          table.insert(newTasks, task)\n        end\n      end\n    end\n    Scheduler.tasks = newTasks\n  end\nend\n\n-- Async sleep simulation\nfunction sleep(seconds)\n  local endTime = os.clock() + seconds\n  while os.clock() < endTime do\n    coroutine.yield()\n  end\nend\n\n-- Example async tasks\nScheduler.spawn(function()\n  for i = 1, 3 do\n    print(\"Task A: \" .. i)\n    sleep(0.1)\n  end\nend)\n\nScheduler.spawn(function()\n  for i = 1, 3 do\n    print(\"Task B: \" .. i)\n    sleep(0.15)\n  end\nend)\n\nScheduler.run()"
    }
  }
}
